<!DOCTYPE html>
<html>

  <head>
    <title>Tasty Tails</title>
    <link rel="stylesheet" type="text/css" href="/css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="/css/index.css" />

    <meta charset="UTF-8">
    <title>Chatting with people you can see</title>
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" -->
    <!-- integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> -->
    <style>
    h1 {
      color:white;
      background-color: blue;
    }
    #characterSelectBackground {
      position: absolute;
      width:100%;
      height:100%;
      background-color: black;
      z-index: 0;
    }
    #characterSelect {
      /**display: none;*/
      position: absolute;
      background-color: grey;
      border: solid;
      border-width: 5px;
      right:23%;
      top:10%;
      bottom:12%;
      left:1%;
      z-index: 1;
    }
    #charPreview {
      position: absolute;
      border: solid;
      right:35%;
      top:10%;
      bottom:30%;
      left:35%;
      z-index: 1;
    }
    .arrows {
      position: absolute;
      margin: auto;
      width: 75%;
      height: auto;
    }
    .arrows:hover {
      filter:invert(100%);
    }
    #speciesSelect {
      position: absolute;
      background-color: white;
      right:68%;
      top:17%;
      bottom:70%;
      left:1%;
    }
      #speciesArrowLeft {
        position: absolute;
        border: solid;
        right:81%;
        top:30%;
        bottom:30%;
        left:1%;
        -webkit-transition-duration: 0.4s; /* Safari */
        transition-duration: 0.4s;
        cursor: pointer;
      }
      #speciesArrowLeft:hover {
        background-color: grey;
        color: white;
      }

      #speciesLable {
        position: absolute;
        border: solid;
        top: 20%;
        bottom: 20%;
        left: 21%;
        right: 50%;
      }

      #speciesArrowRight {
        position: absolute;
        border: solid;
        right:30%;
        top:30%;
        bottom:30%;
        left:52%;

      }
      #speciesArrowRight:hover {
        background-color: grey;
        color: white;
      }
      #headColor {
        position: absolute;

        right:2%;
        top:22%;
        bottom:5%;
        left:71%;
      }

    #bodySelect {
        position: absolute;
        background-color: white;
        right:68%;
        top:34%;
        bottom:53%;
        left:1%;
    }
    #bodyArrowLeft {
      position: absolute;
      border: solid;
      right:81%;
      top:30%;
      bottom:30%;
      left:1%;
      -webkit-transition-duration: 0.4s; /* Safari */
      transition-duration: 0.4s;
      cursor: pointer;
    }
    #bodyArrowLeft:hover {
      background-color: grey;
      color: white;
    }

    #bodyLable {
      position: absolute;
      border: solid;
      top: 20%;
      bottom: 20%;
      left: 21%;
      right: 50%;
    }

    #bodyArrowRight {
      position: absolute;
      border: solid;
      right:30%;
      top:30%;
      bottom:30%;
      left:52%;

    }
    #bodyArrowRight:hover {
      background-color: grey;
      color: white;
    }
      #bodyColor {
        position: absolute;

        right:2%;
        top:22%;
        bottom:5%;
        left:71%;
      }

    #logInBttn {
      position: absolute;
      background-color: white;
      border: solid;
      border-width: 5px;
      right:44.3%;
      top:85%;
      bottom:2%;
      left:44.3%;
    }
    #logInBttn:hover {
      background-color: grey;
      color: white;
    }
    #preview {
      position: absolute;
      background-color: pink;
      right: 32.5%;
      left: 32.5%;
      top: 20%;
      bottom: 15%;
    }

    #playerInformation {
      position: absolute;
      background-color: aqua;
      right: 2%;
      left: 70%;
      top: 20%;
      bottom: 15%;
    }
    #descriptionInput {
      position: absolute;
      top: 10%;
      right: 2%;
      left: 2%;
      bottom: 10%;
    }
    #descrip {
      position: absolute;
      top: 5%;
      bottom: 2%;
      left: 2%;
      width: 94%
    }

    #menu {
      position: absolute;
      background-color: black;
      /*opacity: 0.2;*/
      right:.5%;
      top:0%;
      bottom:55%;
      left:50%;
      z-index: -1;
    }
      #lookTab {
        position: absolute;
        background-color: white;
        border: solid;
        right:84.5%;
        top:0%;
        bottom:93%;
        left:.5%;
      }
      #itemsTab {
        position: absolute;
        background-color: white;
        border: solid;
        right:70%;
        top:0%;
        bottom:93%;
        left:15%;
      }
      #spellsTab {
        position: absolute;
        background-color: white;
        border: solid;
        right:55.5%;
        top:0%;
        bottom:93%;
        left:29.5%;
      }
      #mapTab {
        position: absolute;
        background-color: white;
        border: solid;
        right:41.2%;
        top:0%;
        bottom:93%;
        left:44%;
      }
      #optionsTab {
        position: absolute;
        background-color: white;
        border: solid;
        right:27%;
        top:0%;
        bottom:93%;
        left:58.5%;
      }

      #menuDisplay {
        position: absolute;
        background-color: white;
        border: solid;
        right:0%;
        top:7%;
        bottom:0%;
        left:0%;
      }
        #lookDisplay {
          position: absolute;
          width: 100%;
          height:100%;
          overflow: auto; /* <-why this no work?*/
          display: none;
        }
        #itemsDisplay {
          position: absolute;
          width: 100%;
          height:100%;
          display: none;
        }
        #spellsDisplay {
          position: absolute;
          width: 100%;
          height:100%;
          display: none;
        }
        #mapDisplay {
          position: absolute;
          width: 100%;
          height:100%;
          display: none;
        }
        #optionsDisplay {
          position: absolute;
          width: 100%;
          height:100%;
          display: none;
        }

    .container {
      height:100%;
      margin: 0;
      padding: 0;
      font-family: verdana;
      font-size: 10px;
    }
    .context-menu {
      background: #f6f6f6;
      width: 200px;
      height: auto;
      box-shadow: 0 0 20px 0 #ccc;
      position: absolute;
      display: none;
    }
    .context-menu ul {
      list-style: none;
      padding: 5px 0px 5px 0px;
    }
    .context-menu ul li:not(.separator) {
      padding: 10px 5px 10px 5px;
      border-left: 4px solid transparent;
      cursor: pointer;
    }
    .context-menu ul li:hover {
      background: #eee;
      border-left: 4px solid #666;
    }
    .separator {
      height: 1px;
      background: #dedede;
      margin: 2px 0px 2px 0px;
    }
    #spellsTable {
      margin: auto;
      border: 1px solid #f21515;
      width: 99%;

    }
    #tableIcon {
      width: 10%;
      height:10%;
    }
    #tableName {
      width: 15%;
      height: 10%;
    }
    #tableDescrip {
      width: 75%;
      height:10%;
    }



    .fill {
      position: relitive;
      cursor: pointer;
      width: 48px;
      height: 48px;
    }

    .empty {
      border: 1px solid #21c2cc;
      background-color: #ffffff;
      width: 48px;
      height: 48px;
    }

    .hold {
      border: solid #ccc 4px;
      width: 48px;
      height: 48px;
    }

    .hover {
      background: #f4f4f4;
      border-style: dashed;
      width: 48px;
      height: 48px;
    }

    .invisible {
      display: none;
      width: 48px;
      height: 48px;
    }

    </style>
  </head>

  <body>

    <div id="phaserApp" tabindex="0" oncontextmenu="return showContextMenu(event);">

      <!--Right Click Custom Menu-->
      <div id="contextMenu" class="context-menu">
        <ul>
          <li id="examineItem">Examine</li>
          <li class="separator"></li>
          <li id="pickUp">Pick Up</li>
          <li>Cut</li>
          <li>Paste</li>
        </ul>
      </div>
    </div>

    <!--Character Select Menu-->
    <div id="characterSelectBackground" tabindex="1">
    </div>
    <div id="characterSelect" tabindex="1">
      <center><h1>Create a Character</h1></center>
      <div id="speciesSelect">
        <div id= "speciesArrowLeft"><img class='arrows' src="assets/images/leftarrow.png" alt="Left_Arrow"></div>
        <div id= "speciesLable"><center>Select Species</center></div>
        <div id= "speciesArrowRight"><img class='arrows' src="assets/images/rightarrow.png" alt="Right_Arrow"></div>
        <div id= "headColor"> Color: <input type="color" id="myColor1"></div>
      </div>

      <div id="bodySelect">
        <div id= "bodyArrowLeft"><img class='arrows' src="assets/images/leftarrow.png" alt="Left_Arrow"></div>
        <div id= "bodyLable"><center>Select Secondary Fur Pattern Color</center></div>
        <div id= "bodyArrowRight"><img class='arrows' src="assets/images/rightarrow.png" alt="Right_Arrow"></div>
        <div id= "bodyColor"> Color: <input type="color" id="myColor2"></div>
      </div>

      <div id="logInBttn">
        <center>Click to <br> Log in</center>
      </div>
      <div id="preview">
          <div id= "charPreview"><center><img id='speciesSelectionWindow' src="assets/images/testBody_02.png" alt="Purple_Head"></center></div>
          <div id= "charPreview"><center><img id='bodySelectionWindow' src="assets/images/testFur_02.png" alt="Purple_Head"></center></div>
      </div>
      <div id="playerInformation">
        <div id="usernameInput">
          Input username here: <input id="uN" type="text" autocomplete="off" class="form-control" placeholder="username" aria-label="username"></input>
        </div>
        <div id="descriptionInput">
          Input Character Description here: <br> <textarea id="descrip" autocomplete="off" class="form-control" placeholder="description" aria-label="description"></textarea>
        </div>
      </div>
    </div>

      <!--Tab UI Menu-->
      <div id="menu" tabindex="1">
        <div id="lookTab">
          Look
        </div>
        <div id="itemsTab">
          Items
        </div>
        <div id="spellsTab">
          Spells
        </div>
        <div id="mapTab">
          Map
        </div>
        <div id="optionsTab">
          Options
        </div>

        <div id="menuDisplay">
          <div id="lookDisplay">
            you are in the look tab
          </div>
          <div id="itemsDisplay">
            you are in the items tab
          </div>
          <div id="spellsDisplay">
            you are in the spells tab

              <table id="spellsTable">
                <tr>
                  <td id="tableIcon" class="empty">
                    <div class="fill" draggable="true"></div>
                  </td>
                  <td id="tableName" class="empty"></td>
                  <td id="tableDescrip" class="empty"></td>

                </tr>


              </table>
          </div>
          <div id="mapDisplay">
            you are in the map tab
          </div>
          <div id="optionsDisplay">
            you are in the options tab
          </div>




        </div>
      </div>
    </div>


    <!--Chat Box-->
    <div id="chat-container">
      <div class="container-fluid">
        <div class="row">
          <ul id="messages"></ul>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <form id="message-form" action="">
              <div class="input-group">
                <textarea id="m" autocomplete="off" class="form-control" placeholder="message" aria-label="message"></textarea>
                <span class="input-group.btn">
                  <button id="btn" type="button" onclick="alertFunction()">Send!</button>
                </span>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>



    <script src="//cdn.jsdelivr.net/npm/phaser@3.13.0/dist/phaser.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/index.js" type="module"></script>

    <!--Checks if the game is focusedm or the chat is focused-->
    <script>
    function alertFunction() {
      alert("this button does not work right now... Just press the ENTER key to send your message.");
    }
      var chatFocused = true;
      //this is the code to determine wether the game or the chat is in focus
      let phaserApp = document.getElementById("phaserApp");
      phaserApp.onfocus = function () {
        chatFocused = false;
        //console.log('ChatFocused = ', chatFocused);
      }
      phaserApp.onblur = function () {
        //when you stop focusingon it
        chatFocused = true;
        //console.log('ChatFocused = ', chatFocused);
      }

      window.onclick = hideContextMenu;
      window.onkeydown = listenKeys;
      var contextMenu = document.getElementById('contextMenu');
      function showContextMenu (event) {
        contextMenu.style.display = 'block';
        contextMenu.style.left = event.clientX + 'px';
        contextMenu.style.top = event.clientY + 'px';
        return false;
      }

      function hideContextMenu () {
        contextMenu.style.display = 'none';

      }
      function listenKeys (event) {
        var keyCode = event.which || event.keyCode;
        if(keyCode == 27){
          hideContextMenu();
        }
      }
    </script>

  </body>

</html>
