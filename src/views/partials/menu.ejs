<div id="menu" class="menu-container" tabindex="1">
    <div class="navBar">
        <ul>
            <li class="menuTabs button" id="lookTab"><i class="fa-solid fa-eye"></i> Look</li>
            <li class="menuTabs button" id="itemsTab"><i class="fa-solid fa-sack-dollar"></i> Items</li>
            <li class="menuTabs button" id="spellsTab"><i class="fa-solid fa-scroll"></i> Spells</li>
            <li class="menuTabs button" id="mapTab"><i class="fa-solid fa-map"></i> Map</li>
            <li class="menuTabs button" id="voreTab"><i class="fa-solid fa-utensils"></i> Vore</li>
            <li class="menuTabs button" id="optionsTab"><i class="fa-solid fa-gears"></i> Opts</li>
        </ul>
    </div>

    <!-- Content (Pinned Notes) -->
    <div id="menuDisplay">
        <div id="lookDisplay" class="tabDisplay">
            <div class="paper-note">
                <h3>Inspection</h3>
                <p>Right click an object or character to examine it closely.</p>
                <p><em>"Look closer, there is always more to see..."</em></p>
            </div>
        </div>

        <div id="itemsDisplay" class="tabDisplay">
            <div class="paper-note">
                <h3>Inventory</h3>
                <p>Your pockets are empty.</p>
            </div>
        </div>

        <div id="spellsDisplay" class="tabDisplay">
            <div class="paper-note">
                <h3>Spellbook</h3>
                <table id="spellsTable">
                    <tbody>
                        <tr>
                            <td id="tableIcon" class="empty spell-icon-cell">
                                <div class="fill" draggable="true"></div>
                            </td>
                            <td id="tableName" class="empty spell-name-cell"></td>
                            <td id="tableDescrip" class="empty"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="mapDisplay" class="tabDisplay">
            <div class="paper-note map-note">
                <h3>World Map</h3>
                <i class="fa-solid fa-map-location-dot map-icon"></i>
                <p>Map data not loaded.</p>
            </div>
        </div>

        <!-- Vore Tab -->
        <div id="voreDisplay" class="tabDisplay">
            <div class="vore-header">
                <h2>Anatomy Journal</h2>
            </div>

            <!-- This container is populated by the renderVoreList() JS function -->
            <div id="voreListContainer"></div>

            <button id="addVoreBtn"><i class="fa-solid fa-plus-circle"></i> Add New Entry</button>
        </div>

        <div id="optionsDisplay" class="tabDisplay">
            <div class="paper-note">
                <h3>System Options</h3>
                <label class="options-label">
                    <input type="checkbox" id="debugToggle">
                    <span>Show Hit Areas (Debug)</span>
                </label>
            </div>
        </div>
    </div>
</div>

<!-- SETTINGS MODAL (Hidden) -->
<div id="settingsModal" class="settings-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalTitle">Edit Destination</h2>
            <span class="close" style="cursor:pointer; font-size:2rem; line-height:0.5;">&times;</span>
        </div>

        <!-- Modal Navigation -->
        <div class="modal-tabs">
            <div class="modal-tab active" data-target="general"><i class="fa-solid fa-sliders"></i>
                General</div>
            <div class="modal-tab" data-target="descriptions"><i class="fa-solid fa-file-pen"></i>
                Descriptions</div>
            <div class="modal-tab" data-target="messages"><i class="fa-solid fa-comments"></i> Messages
            </div>
            <div class="modal-tab" data-target="audio"><i class="fa-solid fa-volume-high"></i> Audio
            </div>
        </div>

        <div class="modal-body">
            <form id="settingsForm">
                <input type="hidden" id="editId">

                <!-- TAB 1: GENERAL SETTINGS -->
                <div id="tab-general" class="tab-content">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Destination Name</label>
                            <input type="text" id="editName" placeholder="e.g. Stomach">
                        </div>
                        <div class="form-group">
                            <label>Verb (e.g. swallows)</label>
                            <input type="text" id="editVerb" placeholder="e.g. swallows">
                        </div>
                        <div class="form-group">
                            <label>Digestion Timer (sec)</label>
                            <input type="number" id="editTimer" placeholder="120">
                        </div>
                        <div class="form-group">
                            <label>Animation Type</label>
                            <select id="editAnimation">
                                <option value="1">Oral Vore</option>
                                <option value="2">Anal Vore</option>
                                <option value="3">Cock Vore</option>
                                <option value="4">Unbirth</option>
                                <option value="5">Tail Vore</option>
                                <option value="6">Absorbtion</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label>Default Action Mode</label>
                            <select id="editMode">
                                <option value="Hold">Hold (Keep Prey Safe)</option>
                                <option value="Digest">Digest (Convert to XP)</option>
                                <option value="Absorb">Absorb (Transform)</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- TAB 2: DESCRIPTIONS -->
                <div id="tab-descriptions" class="tab-content" style="display:none;">
                    <div class="form-group">
                        <label>Internal Description</label>
                        <textarea id="editDesc" placeholder="It is dark, warm, and wet..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Examine Description</label>
                        <textarea id="editExamine" placeholder="The belly bulges slightly..."></textarea>
                    </div>
                </div>

                <!-- TAB 3: MESSAGES -->
                <div id="tab-messages" class="tab-content" style="display:none;">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Struggle (Internal)</label>
                            <textarea id="editStruggleIn"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Struggle (External)</label>
                            <textarea id="editStruggleOut"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Digestion (Internal)</label>
                            <textarea id="editDigestIn"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Digestion (External)</label>
                            <textarea id="editDigestOut"></textarea>
                        </div>
                    </div>
                </div>

                <!-- TAB 4: AUDIO (New Feature) -->
                <div id="tab-audio" class="tab-content" style="display:none;">

                    <div class="audio-module">
                        <div style="flex:1">
                            <label>Entry Sound</label>
                            <div class="audio-controls">
                                <select id="editEntrySound">
                                    <option value="none">None</option>
                                    <option value="gulp">Gulp</option>
                                    <option value="squish">Squish</option>
                                    <option value="slide">Wet Slide</option>
                                </select>
                                <button type="button" class="audio-btn" onclick="toggleAudioPreview(this, 'entry')">
                                    <i class="fa-solid fa-play"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="audio-module">
                        <div style="flex:1">
                            <label>Ambient Sound (Loop)</label>
                            <div class="audio-controls">
                                <select id="editAmbientSound">
                                    <option value="none">None</option>
                                    <option value="heartbeat">Heartbeat</option>
                                    <option value="gurgle">Gurgling</option>
                                    <option value="purr">Deep Purr</option>
                                </select>
                                <button type="button" class="audio-btn" onclick="toggleAudioPreview(this, 'ambient')">
                                    <i class="fa-solid fa-play"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="audio-module">
                        <div style="flex:1">
                            <label>Struggle Sound</label>
                            <div class="audio-controls">
                                <select id="editStruggleSound">
                                    <option value="none">None</option>
                                    <option value="muffle">Muffled Shout</option>
                                    <option value="splash">Splash</option>
                                    <option value="groan">Predator Groan</option>
                                </select>
                                <button type="button" class="audio-btn" onclick="toggleAudioPreview(this, 'struggle')">
                                    <i class="fa-solid fa-play"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="audio-module">
                        <div style="flex:1">
                            <label>Exit Sound</label>
                            <div class="audio-controls">
                                <select id="editExitSound">
                                    <option value="none">None</option>
                                    <option value="pop">Pop</option>
                                    <option value="burp">Burp</option>
                                    <option value="belch">Loud Belch</option>
                                </select>
                                <button type="button" class="audio-btn" onclick="toggleAudioPreview(this, 'exit')">
                                    <i class="fa-solid fa-play"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                </div>

            </form>
        </div>
        <div class="modal-footer">
            <button class="save-btn" id="saveSettingsBtn"><i class="fa-solid fa-check"></i> Save
                Changes</button>
        </div>
    </div>
</div>